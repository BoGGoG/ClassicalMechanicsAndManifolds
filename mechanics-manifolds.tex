% arara: pdflatex

%% arara: biber
%% arara: pdflatex
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Wenneker Article
% LaTeX Template
% Version 2.0 (28/2/17)
%
% This template was downloaded from:
% http://www.LaTeXTemplates.com
%
% Authors:
% Vel (vel@LaTeXTemplates.com)
% Frits Wenneker
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt, a4paper, twocolumn]{article} % 10pt font size (11 and 12 also possible), A4 paper (letterpaper for US letter) and two column layout (remove for one column)
\input{structure.tex} % Specifies the document structure and loads requires packages

%----------------------------------------------------------------------------------------
%	ARTICLE INFORMATION
%----------------------------------------------------------------------------------------

%\title{To those physics students who asked why $q$ and $\dot{q}$ are independent in Lagrangian Mechanics}
%\title{Mathematical Notes on Manifolds in Physics}
\title{Notes on Manifolds in Physics}


%\author{%
	%\authorstyle{Niklas Zorbach\textsuperscript{1} and Marco Knipfer\textsuperscript{1, 2}} % Authors 
	%\newline\newline % Space before institutions
	%\textsuperscript{1}\institution{Institute for Theoretical Physics, Goethe-University Frankfurt, Germany}\\ 
	%\textsuperscript{2}\institution{Institute for Physics and Astronomy, The University of Alabama, USA}\\ 
%}

\author{%
	Marco Knipfer\textsuperscript{1, 2} % Authors 
	\newline\newline % Space before institutions
	\textsuperscript{1}\institution{Institute for Theoretical Physics, Goethe-University Frankfurt, Germany}\\ 
	\textsuperscript{2}\institution{Institute for Physics and Astronomy, The University of Alabama, USA}\\ 
}

% Example of a one line author/institution relationship
%\author{\newauthor{John Marston} \newinstitution{Universidad Nacional Autónoma de México, Mexico City, Mexico}}

\date{Version: \today} 

%----------------------------------------------------------------------------------------

\begin{document}

\maketitle % Print the title

\thispagestyle{firstpage} % Apply the page style for the first page (no headers and footers)

%----------------------------------------------------------------------------------------
%	ABSTRACT
%----------------------------------------------------------------------------------------

%\lettrineabstract makes first letter in abstract huge and nice, but does not allow equations in the whole {}.
\lettrineabstract{These notes are my way of learning Riemannian Geometry and better understanding
Lagrangian Mechanics and General Relativity. As a physicist one usually learns all of this in a rather practical way without
understanding the basic mathematical concepts. For example a physicist usually does not learn that the
Lagrangian lives on the tangent bundle, because one implicitly always
identifies some spaces (here the space and the tangent space), which is possible on a flat manifold.
Another example: To understand that for vector fields on a manifold there generally does not exist a global
basis one has to understand what a module is.
I start from the lectures about General Relativity.
This somehow turned into my fancy lecture notes.
The plan is to go on and write more stuff after I have finished the lectures.
}

\tableofcontents
%----------------------------------------------------------------------------------------
%	ARTICLE CONTENTS
%----------------------------------------------------------------------------------------

\section{Manifolds}
\subsection{Topology}
This chapter is basically taken from \citep{Schuller15} with our remarks to it.

We start with a set $M$ which is supposed to be the space where physics happens.
The weakest structure one needs in order to talk about \textit{continuity} (of curves or fields)
is called a topology.

\begin{defn}[Power set $\mathcal{P}$]
    The set of all subsets of $M$.
\end{defn}

\begin{defn}[Topology]
    A Topology $\mathcal{O}$ is a subset $\mathcal{O} \subseteq \mathcal{P}(M)$ satisfying:
    \begin{enumerate}
        \item $\emptyset \in \mathcal{O}$, $M\in\mathcal{O}$,
        \item $U\in\mathcal{O},\quad V\in\mathcal{O}\Rightarrow U\cap V\in\mathcal{O}$
        \item $U_\alpha\in\mathcal{O},\quad \alpha\in A \Rightarrow
            \left( \bigcup\limits_{\alpha\in A} U_\alpha \right) \in \mathcal{O}$
    \end{enumerate}
\end{defn}

Every set has the \textit{chaotic topology}
\begin{equation}
    \mathcal{O}_\text{chaotic} := \left\{ \emptyset, M \right\}\,,
\end{equation}
and the \textit{discrete topology}
\begin{equation}
    \mathcal{O}_\text{discrete} := \mathcal{P}(M)\,,
\end{equation}
which are both useless.
The special case $M = \mathbb{R}^d = \mathbb{R} \times \cdots \times \mathbb{R}$ has a standard topology
for which we need the definition of a soft ball.
\begin{defn}[Soft Ball in $\mathbb{R}^d$]
   \begin{equation}
   B_r(p) := \left\{ (q_1,\cdots,q_d) \left| \sum_{i=1}^{d}(p_i-p_i)^2 < r^2\right. \right\}\,,
   \end{equation} 
   with $r\in \mathbb{R}^+$, $p\in\mathbb{R}^d$.
   Note: This does not need a norm or vector space structure on $\mathbb{R}^d$.
\end{defn}
\begin{defn}[$\mathcal{O}_\text{standard}$ on $\mathbb{R}^d$]
    \begin{equation}
        U \in \mathcal{O}_\text{standard} :\Leftrightarrow \forall p\in U:
        \exists r\in\mathbb{R}^+ : B_r(p) \subseteq U
    \end{equation}
\end{defn}

\begin{figure}[h]
\centering
\begin{tikzpicture}
    %\draw[smooth cycle,tension=3.0] plot coordinates{(1,0) (1,1) (2,2) (3,3) (6,0)} node [label=right:$M$];

    % Manifold
    \draw[smooth cycle, tension=0.4] plot coordinates{(2,4) (-1.5,0) (3.5,-2) (6,1)} node [label=$M$, anchor = east] {};
    \draw[smooth cycle, tension=1, dashed] plot coordinates{(1,1) (-1,0) (1,-1) (2.5,0.5)} node [label=$U$, anchor = south west] {};
    %\draw[smooth cycle, tension=0.4, dashed] plot coordinates{(1, 2) (1,3) (3,3) (3,2)} node [label=$V$] {};
    \draw[smooth cycle, tension=0.4] plot coordinates{(1, 2) (1,3) (3,3) (3,2)} node [label=$V$, anchor = east] {};
    \draw[dashed] (-0.5,0) circle (.4cm) node [label = $B_r$, anchor = north west] {};
    \draw[fill] (-0.5,0) circle (.05cm) ;
    \draw (1.5,1.95) circle (.2cm) node [label = $B_r$, anchor = north west] {};
    \draw[fill] (1.5,1.95) circle (.05cm) ;

    %\draw[help lines] (-3,-6) grid (8,6);

\end{tikzpicture}
\caption{The set $U$ is in the standard topology, $V$ not.}
\end{figure}

Some terminology: Let $M$ be a set with a topology $\mathcal{O} =:$ set of open sets.
We call $(M, \mathcal{O}$ a \textit{topological space} and:
    \begin{itemize}
        \item $U \in \mathcal{O} \Leftrightarrow: \text{call } U\subseteq M$ an \textit{open set}
        \item $M\backslash A \in \mathcal{O} \Leftrightarrow: \text{call } A\subseteq M$  a \textit{closed set}
    \end{itemize}
\begin{note}
    The empty set is open and closed. If a set is open we cannot directly follow that it is not closed or vise versa. For $M = \left\{ 1, 2 \right\}$ and $\mathcal{O}_M = \left\{ \emptyset, \left\{ 1 \right\}, \left\{ 2 \right\}, \left\{ 1,2 \right\} \right\}$ the set $\left\{ 2 \right\}$ is open and closed.
\end{note}

\subsection{Continuous Maps}
A map
\begin{equation}
    f: M \to N\,,
\end{equation}
takes every point from the domain M (a set) to the target N (a set).
If at least one point $p\in N$ is not reached, the map is not \textit{surjective}.
If at least one point is hit twice, the map is not \textit{injective}.
A map that is injective and surjective is called \textit{surjective}.

\begin{defn}[Preimage]
    \begin{align}
        f&: M \to N \supseteq V \nonumber \\
        \text{preim}_f(V) &:= \left\{ m\in M~|~f(m) \in V \right\}
    \end{align}
\end{defn}

\begin{defn}[Continuity]
    $(M, \mathcal{O}_M)$ and $(N, \mathcal{O}_N)$ topological spaces.
    Then a map $f: M \to N$ is called \textit{continuous with respect to $\mathcal{O}_M$ and
    $\mathcal{O}_N$} if
    \begin{equation}
        \boxed{
    \forall V\in \mathcal{O}_N: \text{preim}_f(V) \in \mathcal{O}_M
}\,.
    \end{equation}
    \textit{``A map is open iff the preimages of all open sets are open sets.''}
\end{defn}

\begin{note}
    If a map is not surjective there are sets with preimage $\emptyset$, thus we need to have
    $\emptyset$ in $\mathcal{O}$, otherwise only surjective maps could be continuous.
\end{note}
\begin{note}
    The inverse of a continuous function does not need to be continuous.
\end{note}

\begin{defn}[Composition of maps]
    For $f$ and $g$
    \begin{equation*}
        f: M \to N, \quad g: N \to P\,,
    \end{equation*}
    we define the \textit{composition} as
    \begin{align}
        g \circ f&: M \to P \\
        m &\mapsto (g\circ f)(m) := g(f(m)) \nonumber
    \end{align}
\end{defn}

\begin{theorem}[Composition of continuos maps]
    For $f$, $g$ continuos also $g\circ f$ is continuous (if space match, \textit{i.e.}\ $g\circ f$ is defined).
\end{theorem}


\begin{defn}[Subset topology, Inherited topology]
    A set $M$ with topology $\mathcal{O}_M$. Given any subset $S \subseteq M$ we
    can construct the inherited topology $\mathcal{O}\eval_S \subseteq \mathcal{P}(S)$
    \begin{equation}
        \mathcal{O}\eval_S := \left\{ U\cap S~|~U\in \mathcal{O}M \right\}\,.
    \end{equation}
\end{defn}

\begin{note}
    For $S \subseteq M$, if $f$ is continuous then $f\eval_{S}$ is also
    continuous if $\mathcal{O}\eval_S$ is chosen. This is for example important
    if you are on a trajectory $\gamma$ through $\mathbb{R}^n$ and measure the temperature
    $T\eval_\gamma$.
\end{note}

\begin{defn}[Topological manifold]
    A topological space $(\M, \mathcal{O})$ is called a \textit{d-dimensional topological manifold}
    if
    \begin{equation}
        \forall p \in \M: \exists U \in \mathcal{O},~p\in U: \exists x: U\to x(U)\subseteq \mathbb{R}^{d}
        \,,
    \end{equation}
    with the following properties (wrt. $\mathcal O_\text{std}$ on $\mathbb{R}^{d}$):
    \begin{enumerate}
        \item $x$ intervitble: $x^{-1} : x(U) \to U$,
        \item $x$ continuous,
        \item $x^{-1}$ continuous\,.
    \end{enumerate}
    ``Invertible, in both directions continuous map to $\mathbb{R}^{n}$.''
\end{defn}

\begin{note}
    Thus in the above definition $x(U)$ is also open (from the definition of continuity).
\end{note}

\begin{terminology}~\\
    \begin{itemize}
        \item $(U,x)$ is a \textit{chart} of $\M, \mathcal{O}$,
        \item $\mathcal{A} = \left\{ (U_{(\alpha)}, x_{(\alpha)} | \alpha \in A \right\}$ is an \textit{atlas} of $(\M, \mathcal{O})$ if $\bigcup\limits_{\alpha\in A} U_{(\alpha)}$ covers the whole manifold $\M$,
        \item $x: U \to x(U) \subseteq \mathbb{R}^{d}$ is a \textit{chart map} 
            $x(p) = (x^1(p), \dots, x^d(p))$, where the \textit{component maps} $x^i: U\to\mathbb{R}$ are called \textit{coordinate maps},
        \item $p \in U$, then $x^1(p)$ is the first coordinate of the point p wrt.\ the chosen chart $(U, x)$.
    \end{itemize}
\end{terminology}
\begin{note}
    The choice of the chart (choice of coordinates) has nothing to do with the physics.
    Physics is chart independent. $\M$ is ``the real world''.
\end{note}

\subsection{Chart Transition Maps}

\begin{figure*}[tbh]
    \centering
    \begin{tikzpicture}
    % https://tex.stackexchange.com/questions/382762/drawing-manifolds-in-tikz
    % Functions i
        \path[->] (0.8, 0) edge [bend right] node[left, xshift=-2mm] {$x$} (-1, -2.9);
        \draw[white,fill=white] (0.06,-0.57) circle (.15cm);
        \path[->] (-0.7, -3.05) edge [bend right] node [right, yshift=-3mm] {$x^{-1}$} (1.093, -0.11);
        \draw[white, fill=white] (0.95,-1.2) circle (.15cm);

    % Functions j
        \path[->] (5.8, -2.8) edge [bend left] node[midway, xshift=-5mm, yshift=-3mm] {$y^{-1}$} (3.8, -0.35);
        \draw[white, fill=white] (4,-1.1) circle (.15cm);
        \path[->] (4.2, 0) edge [bend left] node[right, xshift=2mm] {$y$} (6.2, -2.8);
        \draw[white, fill=white] (4.54,-0.12) circle (.15cm);

    % Manifold
        \draw[smooth cycle, tension=0.4, fill=white, pattern color=brown, pattern=spray, opacity=0.7] plot coordinates{(2,2) (-0.5,0) (3,-2) (5,1)} node at (3,2.3) {$\M$};

    % Help lines
    %\draw[help lines] (-3,-6) grid (8,6);

    % Subsets
        \draw[smooth cycle, dashed, pattern color=orange, pattern=crosshatch dots, fill opacity = 0.4] 
        plot coordinates {(1,0) (1.5, 1.2) (2.5,1.3) (2.6, 0.4)} 
        node [label={[label distance=-0.3cm, xshift=-2cm, fill=white]:$U$}] {};
        \draw[smooth cycle, dashed, pattern color=blue, pattern=crosshatch dots, fill opacity = 0.4] 
        plot coordinates {(4, 0) (3.7, 0.8) (3.0, 1.2) (2.5, 1.2) (2.2, 0.8) (2.3, 0.5) (2.6, 0.3) (3.5, 0.0)} 
        node [label={[label distance=-0.8cm, xshift=.75cm, yshift=1cm, fill=white]:$V$}] {};

    % First Axis
        \draw[thick, ->] (-3,-5) -- (0, -5) node [label=above:$x(U)$] {};
        \draw[thick, ->] (-3,-5) -- (-3, -2) node [label=right:$\mathbb{R}^d$] {};

    % Arrow from i to j
        \draw[->] (0, -3.85) -- node[midway, above]{$y\circ x^{-1}$} (4.5, -3.85);

    % Second Axis
        \draw[thick, ->] (5, -5) -- (8, -5) node [label=above:$x(V)$] {};
        \draw[thick, ->] (5, -5) -- (5, -2) node [label=right:$\mathbb{R}^d$] {};

    % Sets in R^m
        \draw[white, dashed, pattern color=blue, pattern=crosshatch dots, fill opacity = 0.4] (-0.67, -3.06) -- +(180:0.8) arc (180:270:0.8);
        \fill[even odd rule, white] [smooth cycle] plot coordinates{(-2, -4.5) (-2, -3.2) (-0.8, -3.2) (-0.8, -4.5)} (-0.67, -3.06) -- +(180:0.8) arc (180:270:0.8);
        \draw[smooth cycle, dashed, pattern color = orange, pattern = crosshatch dots, fill opacity = 0.4] plot coordinates{(-2, -4.5) (-2, -3.2) (-0.8, -3.2) (-0.8, -4.5)};
        \draw[dashed] (-1.45, -3.06) arc (180:270:0.8);

        \draw[white, dashed, pattern color=orange, pattern=crosshatch dots, fill opacity = 0.4] (5.7, -3.06) -- +(-90:0.8) arc (-90:0:0.8);
        \fill[even odd rule, white] [smooth cycle] plot coordinates{(7, -4.5) (7, -3.2) (5.8, -3.2) (5.8, -4.5)} (5.7, -3.06) -- +(-90:0.8) arc (-90:0:0.8);
        \draw[smooth cycle, dashed, pattern color = blue, pattern = crosshatch dots, fill opacity = 0.4] plot coordinates{(7, -4.5) (7, -3.2) (5.8, -3.2) (5.8, -4.5)};
        \draw[dashed] (5.69, -3.85) arc (-90:0:0.8);

    \end{tikzpicture}

    \caption{Visualization of chart transition maps. ``How to glue together the charts of an atlas.'' Plot modified from~\citep{texstackexchange:manifolds}}
    \label{fig:transitionmaps}
\end{figure*}
Given $(U, x)$ and $(V, y)$ charts, on $U\cup V$ one can transition from
one chart to the other by (see figure~\ref{fig:transitionmaps})
\begin{equation}
    y\circ x^{-1}: \mathbb{R}^{d} \supseteq x(U\cap V) \to y(U\cap V) \subseteq \mathbb{R}^{d}\,,
\end{equation}
which is called the \textit{chart transition map}.
\begin{note}
    As a physicist one talks about a ``change in coordinates''.
\end{note}

\subsection{Manifold Philosophy}

The idea is to define properties of some object in the real world $\M$ by at a chart-representative
of it. For example the continuity of a curve $\gamma: [0,1]\to\M$ can be judged by looking at
$x\circ\gamma: [0,1]\to\mathbb{R}^{d}$, because $x$ is invertible and in both directions continuous
and the composition of two continuous maps is also continuous.
\begin{note}
    One needs to make sure that the property of the object on $\M$ does not depend on the
    map $x$ or $y$. For continuity this is the case, since 
    $y\circ\gamma = (y\circ x^{-1}) \circ x\circ \gamma$ and the chart transition map
    $y\circ x^{-1}$ is also continuous.
\end{note}

Other properties like ``differentiability'' are not even defined on $\M$ a priori,
so one can only talk about the chart representative. Here the definition that $\gamma$
is differentiable iff $x\circ\gamma: [0,1]\to\mathbb{R}^{d}$ is differentiable has the
problem that $x$ and $y$ only need to be continuous and so the chart transition map
$y\circ x^{-1}$ does not need to be differentiable unless one restricts oneself to only
differentiable charts.

\section{Vector Spaces}
\subsection{Vectors and Linear Maps}
In order to understand the tangent space we need to understand vector spaces.
\begin{defn}[Vector space $(V,+,\cdot)$]
    \label{def:vectorspace}
    A vector space $(V,+,\cdot)$ is a set $V$ with
    \begin{itemize}
        \item an ``addition'' $+: V\times V \ to V$,
        \item an ``S-multiplication'' $\cdot:\mathbb{R}\times V \ to V$
    \end{itemize}
    and the properties CANI ADDU:\\ $\forall v, w, u \in V, \lambda, \mu \in \mathbb{R}$
    \begin{description}
        \item[C$^+$:] $v + w = w + v$\,,
        \item[A$^+$:] $(u + v) + w = u + (v + w)$\,,
        \item[N$^+$:] $\exists 0 \in V: \forall v \in V: v + 0 = v$\,,
        \item[I$^+$:] $\forall v \in V: \exists(-v)\in V: v + (-v) = 0$\,,
        \item[A:] $\lambda \cdot ( \mu \cdot v) = (\lambda \cdot \mu) \cdot v$\,,
        \item[D:] $(\lambda + \mu)\cdot v = \lambda \cdot v + \mu \cdot v$\,,
        \item[D:] $\lambda \cdot v + \lambda \cdot w = \lambda \cdot (v + w)$\,,
        \item[U:] $ 1 \cdot v = v$\,.
    \end{description}
    An element of a vector space is called a \textit{vector}.
\end{defn}
\begin{note}
The addition $+$ in definition~\ref{def:vectorspace} sometimes is between vectors and sometimes between
scalars. It is important to know the difference.
\end{note}

\begin{defn}[Linear maps]
    (Structure respecting maps between vector spaces)\newline
    $(V, +_V, \cdot_V)$ and $(W, +_W, \cdot_W)$ vector spaces.
    A map
    \begin{equation}
        \phi: V \to W
    \end{equation}
    is called \textit{linear} if $\forall v, \tilde{v} \in V, \forall \lambda \in \mathbb{R}$
    \begin{enumerate}
        \item $\phi(v +_V + \tilde{v}) = \phi(v) +_W \phi(\tilde{v})$
        \item $\phi(\lambda\cdot_V v) = \lambda \cdot_W \phi(v)$
    \end{enumerate}
    We write:
    \begin{equation}
        \phi: V \to W\, \text{linear}\, \Leftrightarrow: \phi: V \linearto W\,.
    \end{equation}
\end{defn}

\begin{theorem}[Transitivity of linearity of maps]
    $V, W, U$ vector spaces, $\psi: V\linearto W$, $\phi: W\linearto U$
    then $\phi \circ \psi$ is also linear: $\phi\circ\psi: V \linearto U$.
\end{theorem}

\begin{defn}[Homomorphisms Hom$(V,W)$]
    \begin{equation}
        \text{Hom}(V,W):= \left\{ \phi: V\linearto W \right\}\,.
    \end{equation}
\end{defn}
\begin{note}
    Hom$(V,W)$ can be made into a vector space by defining an addition and a multiplication
    \begin{itemize}
        \item $(\phi + \psi)(v) := \phi(v) + \psi(v)$\,,
        \item $(\lambda \psi)(v) := \lambda (\psi(v))$\,.
    \end{itemize}
\end{note}

\begin{defn}[Dual vector space $V^\star$]
    \begin{equation}
        V^\star := \left\{ \phi: V \linearto \mathbb{R} \right\} = \text{Hom}(V, \mathbb{R})\,.
    \end{equation}
    The vector space $(V^\star, +, \cdot)$ is the \textit{dual vector space} to $V$.
    $\phi \in V^\star$ is informally called a \textit{covector}.
\end{defn}

\begin{defn}[$(r, s)$ - Tensors]
    $(V, +, \cdot)$ vector space, $r, s\in \mathbb{N}_0$.
    An $(r, s)$-tensor $T$ over $V$ is a multi-linar map
    \begin{equation}
        T: \overbrace{V^\star \times \cdots \times V^\star}^r \times
        \overbrace{V \times \cdots \times V}^s \xrightarrow{\begin{smallmatrix} \sim\\ \vdots \\ \sim \end{smallmatrix}} \mathbb{R}
    \end{equation}
\end{defn}
\begin{theorem}[Covector is (0,1)-tensor]
    \begin{equation}
        \phi\in V^\star \Leftrightarrow \phi: V\linearto \mathbb{R} \Leftrightarrow \phi\,(0,1)\,\text{tensor}\,.
    \end{equation}
\end{theorem}
\begin{theorem}[Vector is (1,0)-tensor]
    If $\text{dim}V < \infty$
    \begin{equation}
        v \in V = (V^\star)^\star \Leftrightarrow 
        v: V^\star \linearto \mathbb{R} \Leftrightarrow
        v\,\text{is}\, (1,0)-\text{tensor}\,.
    \end{equation}
\end{theorem}

\subsection{Bases}
\begin{defn}[Hamel-basis]
    $(V, +, \cdot))$ vector space. A subset $B \subset V$ is called a Hamel-basis if
    \begin{equation}
        \forall v\in V\, \exists!\,\text{finite}\,F=\left\{ f_1,\ldots,f_n \right\}\subset B: \exists! \underbrace{v^1, \cdots, v^n}_{\in \mathbb{R}}\,,
    \end{equation}
    such that
    \begin{equation}
        v = v^1 f_1 + \cdots + v^n f_n\,.
    \end{equation}
    (and all $f_i$ linearly independent).
\end{defn}
\begin{defn}[Dimension of a vector space]
    If a basis $B$ with $d<\infty$ many elements, then we call $d =: \text{dim}V$.
\end{defn}

If we have chosen a basis $\left\{ e_1, \ldots, e_n \right\}$ of $(V, +, \cdot)$ then
$(v^1, \ldots, v^n)$ are called the \textit{components of $V$} w.r.t.\ the chosen basis
if
\begin{equation}
    v = v^1 e_1 + \cdots v^n e_n\,.
\end{equation}

\begin{defn}[Dual basis]
    Choose basis $\left\{ e_1, \cdots, e_n \right\}$ for $V$. 
    The basis $\left\{ \epsilon^1, \cdots, \epsilon^n \right\}$
    for $V^\star$ can be chosen that
    \begin{equation}
        \epsilon^a(e_b) = \delta^a_b\quad \forall a,b = 1,\ldots, n\,.
    \end{equation}
    $\left\{ \epsilon^1,\dots,\epsilon^n \right\}$ is then called \textit{the dual basis} of the dual
    space.
\end{defn}

\subsection{Components of a tensor}
$T$ an $(r,s)$-tensor. Then the real numbers
\begin{equation}
    T\indices{^{i_1\ldots i_r} _{j_1\ldots j_s}} = T\left( \epsilon^{i_1},\ldots, \epsilon^{i_r}, e_{j_1}, \ldots e_{j_s}\right)
\end{equation}
are the components of $T$ with respect to the chosen basis.
From the components and the basis one can reconstruct the entire tensor:
Example for (1, 1)-tensor:
\begin{equation}
    T(\varphi, v) = T\indices{^i _j} \varphi_i v^j\, \label{eq:tensorcomponentsexample}
\end{equation}
where $\varphi_i$ are the components of $\varphi\in V^\star$ and $v^j$ the components of $v\in V$ with respect to
the chosen basis. In equation~(\ref{eq:tensorcomponentsexample}) the \textit{Einstein summation convention} is used, \textit{i.e.}\ an index that appears up and down in an expression is summed over.

\begin{note}
    The Einstein summation convention is only useful because we are working with \textit{linear maps},
    otherwise the expression
    \begin{equation}
        \varphi\left(\sum_i v^i e_i\right) = \sum_i \varphi(v^i e_i)\,, 
    \end{equation}
    would not hold and with the summation index we would not know where the sum sign goes.
\end{note}

\section{Differentiable Manifolds}
So far we only had topological manifolds. We also want to be able to talk about the velocity of
curves. The problem is that the notion of a topological manifold is not enough to define
differentiability of curves. In this section we will find out what additional structure we need
to be able to talk about the differentiability of
\begin{itemize}
    \item curves: $\mathbb{R}\to \M$
    \item functions: $\M\to \mathbb{R}$
    \item maps: $\M\to\mathcal{N}$
\end{itemize}
Strategy: Choose a chart $(U, x)$ and consider portion of the curve in the domain of the chart:
$\gamma: \mathbb{R}\to U$ (see figure~\ref{fig:curvechart}). Since $x\circ\gamma: \mathbb{R}\to\mathbb{R}^d$
we can try to ``lift'' the notion of differentiability of a curve on $\mathbb{R}^d$ to that of
a curve on $\M$. The problem is to make this independent of the chart.
\begin{figure}[tbh]
    \centering
    \begin{tikzpicture}
    \matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
    {
        ~                 & y(U\cup V)\subseteq \mathbb{R}^d\\
        \gamma:\mathbb{R} & U\cup V \neq \emptyset \\
        ~                 & x(U\cup V)\subseteq \mathbb{R}^d \\
    };
    \path[-stealth]
        (m-2-1) edge node [above] {$\gamma$} (m-2-2)
        (m-2-1) edge node [below, rotate = -25] {$x\circ\gamma$} (m-3-2)
        (m-2-1) edge node [above, rotate = +25] {$y\circ\gamma$} (m-1-2)
        (m-3-2) edge[bend right = 60] node [right, rotate = 90, xshift = -0.5cm, yshift = -0.2cm] {$y\circ x^{-1}$} (m-1-2)
        (m-2-2) edge node [right] {$x$} (m-3-2)
        (m-2-2) edge node [right] {$y$} (m-1-2);
    \end{tikzpicture}
    \caption{Curve $\gamma$ in chart.}
    \label{fig:curvechart}
\end{figure}
\begin{equation}
    y\circ\gamma = \underbrace{(y\circ x^{-1})}_{\mathbb{R}^d\to\mathbb{R}^d}\circ \underbrace{(x\circ\gamma)}_{\substack{\mathbb{R}\to\mathbb{R}^d\\ \text{differentiable}}}\,,
\end{equation}
but we only know that the \textit{chart transition map} $y\circ x^{-1}$ is continuous (because of the definition of a top. Manifold). Thus it is not guaranteed that
$y\circ \gamma$ is continuons, not differentiable. Reminder: The composition of continuous maps is continuous,
same for differentiable. 
The above definition of differentiability of $\gamma$ by
checking the differentiability of $x\circ\gamma$ with some chart $x$ is not independent of the chart.

\begin{defn}[$\flower$ - compatibility of charts]
    Two charts $(U, x)$ and $(V, y)$ of a topological manifold are called $\flower$-compatible if
    either
    \begin{enumerate}
        \item $U\cup V = \emptyset$ or
        \item $U\cup V \neq \emptyset$ and the chart transition maps
            \begin{align*}
                y\circ x^{-1}&:\mathbb{R}^d\supseteq x(U\cup V) \to y(U\cup V) \subseteq \mathbb{R}^d \\
                x\circ y^{-1}&: \mathbb{R}^d\supseteq y(U\cup V) \to x(U\cup V) \subseteq \mathbb{R}^d
            \end{align*}
            have the $\flower$-property in the $\mathbb{R}^d$-sense.
    \end{enumerate}
\end{defn}

\begin{defn}[$\flower$-compatible atlas]
    An atlas $\mathcal{A}_\flower$ is a $\flower$-compatible atlas if any two charts in
    $\mathcal{A}_\flower$ are $\flower$-compatible.
\end{defn}

\begin{defn}[$\flower$-manifold]
    A $\flower$-manifold is a triple $(\underbrace{\M, \mathcal{O}}_{\text{top.\ manif.}}, 
    \underbrace{\mathcal{A}_\flower}_{\in \mathcal{A}_\text{max}}$).
\end{defn}

\begin{tabular}{ll}
    $\flower$ & $\flower$ property in $\mathbb{R}^d$-sense \\
    \hline\hline
    $C^0$     & $C^0(\mathbb{R}^d \to \mathbb{R}^d)$ continuous maps\\
    $C^1$     & $C^1(\mathbb{R}^d \to \mathbb{R}^d)$ differentiable and result is cont.\\
    $C^k$     & $C^k(\mathbb{R}^d \to \mathbb{R}^d)$ k times diffble and result is cont.\\
    $D^k$     & $D^k(\mathbb{R}^d \to \mathbb{R}^d)$ k times differentiable\\
    $C^\infty$     & $C^\infty(\mathbb{R}^d \to \mathbb{R}^d)$ smooth functions\\
    $C^\omega$  & $\exists$ multidim. Taylor expansion, $C^\omega \subset C^\infty$
\end{tabular}
\begin{note}
    The more fancy properties one wants for the objects on the manifold, the more restrictive one
    has to be for the atlas.
\end{note}
\begin{theorem}[$C^1\to C^\infty$]
    Any $C^{k \leq 1}$-manifold atlas $\mathcal{A}_{C^{k\leq 1}}$ of a topological manifold contains
    a $C^\infty$-atlas.
\end{theorem}
Thus we may without loss of generality always consider $C^\infty$-manifolds. 
``smooth'' manifolds, unless we wish to define Taylor expandibility or complex differentiability, \ldots.
\begin{defn}[Smooth manifold]
    $(\M, \mathcal{O}, \mathcal{A})$, where $(\mathcal{M, O})$ is a topological manifold and $\mathcal{A}$ is a $C^\infty$-atlas.
\end{defn}

\section{Diffeomorphisms}
\begin{equation*}
    M \xrightarrow{\phantom{asdf}\phi\phantom{asdf}} N
\end{equation*}
$M$, $N$ naked sets, then the structure-preserving maps are bijections (invertionable maps).
\begin{defn}[Set-theoretically isomorphic]
    Two sets $M$, $N$ are said to be \textit{set-thoretically isomorphic} $M\cong_\text{st} N$ if
    $\exists$ a bijection $\phi: M\to N$ between them.
\end{defn}
\begin{note}
    Then they are ``of the same size''. Examples: $\mathbb{N}\cong_\text{st}\mathbb{Z}$, $\mathbb{N}\cong_\text{st} \mathbb{Q}$,
    $\mathbb{N}\not\cong_\text{st} \mathbb{R}$
\end{note}
Now $(\M, \mathcal{O}_\M)$ and $(\mathcal{N}, \mathcal{O_N})$.
\begin{equation*}
    \M \xrightarrow{\phantom{asdf}\phi\phantom{asdf}} \mathcal{N}
\end{equation*}
\begin{defn}[Topologically isomorphic (homeomorphic)]
    $(\M, \mathcal{O}_\M) \cong_\text{top} (\mathcal{N}, \mathcal{O_N})$ topologically isomorphic = ``homeomorphic'' if $\exists \phi: \M\to\mathcal{N}$ and $\phi, \phi^{-1}$ are \textit{continuous}.
\end{defn}
\begin{note}
    Continuity is the important property here.
    This is a stronger notion. If two spaces are hoemomorphic then they are also set-theoretically isomorphic.
\end{note}
\begin{defn}[Isomorphic vector spaces]
    $(V, +_V, \cdot_V) \cong_\text{vec} (W, +_W, \cdot_W)$ if $\exists$ a bijection $\phi:V\to W$ that is
    linear in both directions.
\end{defn}
\begin{defn}[diffeomorphic]
    Two $C^\infty$ manifolds $(\M, \mathcal{O_M}, \mathcal{A_M})$ and $(\mathcal{N, O_N, A_N})$
    are said to be \textit{diffeomorphic} if $\exists$ a bijeciton $\phi: \M \to \mathcal{N}$ such that
    $\phi, \phi^{-1}$ are both $C^\infty$-maps, where by $C^\infty$ we mean that $y\circ \phi \circ x^{-1}$
    is in $C^\infty$ in the $\mathbb{R}^d$-sense, see figure~\ref{fig:diffeo-commdiag}.
    \label{def:diffeomorphic}
\end{defn}

\begin{figure}[tbh]
    \centering
    \begin{tikzpicture}
    \matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
    {
        \mathbb{R}^d & \mathbb{R}^l \\
        \M \supseteq U & V \subseteq N \\
        \mathbb{R}^d & \mathbb{R}^l \\
    };
    \path[-stealth]
        (m-1-1) edge node [below] {$\tilde{y} \circ \phi \circ \tilde{x}^{-1}$} (m-1-2)
        (m-2-1) edge node [left] {$\tilde{x}$} (m-1-1)
        (m-2-2) edge node [right] {$\tilde{y}$} (m-1-2)
        (m-2-1) edge node [above] {$\phi$} (m-2-2)
        (m-2-1) edge node [left] {$x$} (m-3-1)
        (m-2-2) edge node [right] {$y$} (m-3-2)
        (m-3-1) edge node [above] {$y \circ \phi \circ x^{-1}$} (m-3-2)
        (m-3-1) edge[bend left = 60] node [left, rotate = 90, xshift = 0.5cm, yshift = +0.2cm] {$C^\infty$} (m-1-1)
        (m-3-2) edge[bend right = 60] node [right, rotate = 90, xshift = -0.4cm, yshift = -0.25cm] {$C^\infty$} (m-1-2);
    \end{tikzpicture}
    \caption{In the definition of diffeomorphic~\ref{def:diffeomorphic} $\phi, \phi^{-1}$ have to be
    $C^\infty$, which is defined such that $y\circ\phi\circ x^{-1}$ has to be $C^\infty$ in the $\mathbb{R}^d$-sense, which is chart-independent here.}
    \label{fig:diffeo-commdiag}
\end{figure}
\begin{note}
    Since we started with $C^\infty$-manifolds, the chart transition maps are $C^\infty$ and thus
    the notion of differentiability in the definition~\ref{def:diffeomorphic} is independent of the
    choice of charts, \textit{i.e.} $\tilde{y}\circ\phi\tilde{x}^{-1}$ is also $C^\infty$, see figure~\ref{fig:diffeo-commdiag}.
\end{note}
\begin{theorem}
    \# = number of $C^\infty$-manifolds one can make of a given $C^\infty$-manifold (if any) --- up to diffeomorphisms ---.\newline
    \begin{center}
    \begin{tabular}{ll}
        $\text{dim}M$  & \# \\
        \hline
        \begin{tabular}{l} 1 \\ 2 \\ 3 \end{tabular} & $\left.\begin{tabular}{l} 1 \\ 2 \\ 3 \end{tabular}\right\}$ Moise-Radon theorem  \\
        \begin{tabular}{l} 4 \end{tabular} & \begin{tabular}{l} uncountable infinitely many \end{tabular} \\
        \begin{tabular}{l} 5 \\ 6 \\ \vdots \end{tabular} & $\left.\begin{tabular}{l} finite \\ finite \\ finite \end{tabular}\right\}$ surgery theory
    \end{tabular}
    \end{center}
\end{theorem}

\section{Tangent Spaces}
``What is the velocity of a curve $\gamma$ at a point $p$?''
\subsection{Velocities, Tangent Spaces}
\begin{defn}[Velocity]
    $(\mathcal{M,O,A})$ smooth manifold, curve $\gamma: \mathbb{R}\to \M$ at least $C^1$.
    Suppose $\gamma(\lambda_0) = p$.
    The velocity $v$ of $\gamma$ at $p$ is the linear map
    \begin{align*}
        v_{\gamma, p}: C^\infty(\M) &\linearto \mathbb{R}\,,\\
        f &\mapsto v_{\gamma, p}(f)\,,
    \end{align*}
    with
    \begin{equation}
        \boxed{
        v_{\gamma,p}(f) := (f \circ \gamma)'(\underbrace{\gamma^{-1}(p)}_{\lambda_0})
    }\,,
    \end{equation}
    \textit{i.e.}, the directional derivative of $f$ along $\gamma$ at the point $p$
\end{defn}
\begin{note}
    Remember 
    \begin{align}
        C^\infty(\M) &= \left\{ f: \M\to\mathbb{R} | f \text{ smooth, }\right. \nonumber\\
            &(f+g)(p):= f(p) + g(p)\\
            &\left.(\lambda \cdot g)(p) := \lambda \cdot g(p), \lambda \in \mathbb{R}\right\}\nonumber
    \end{align}
    is a vector space.
\end{note}
Since $f\circ\gamma: \mathbb{R}\to\mathbb{R}$ we can simply take the normal derivative.
\begin{center}
\begin{tikzpicture}
\matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
{
    \mathbb{R} & M & \mathbb{R} \\
};
\path[-stealth]
    (m-1-1) edge node [above] {$\gamma$} (m-1-2)
    (m-1-2) edge node [above] {$f$} (m-1-3)
    (m-1-1) edge[bend left = -60] node [above] {$f\circ\gamma$} (m-1-3);
\end{tikzpicture}
\end{center}
\begin{note}
    In differential calculus one had the directional derivative as $v^i(\partial_i f)$.
    The shift in philosophy is now to see $v^i\partial_i$, \textit{i.e.}, the operator
    that acts on $f$, as the vector.
\end{note}
\begin{defn}[Tangent space]
    $\forall p \in \M$ the ``tangent space to $\M$ at $p$'' consists of all the velocities
    of curves at that point :
    \begin{equation}
        \T_p\M:=\left\{ v_{\gamma,p} | \gamma\text{ smooth curves} \right\}\,.
    \end{equation}
    \label{def:tangentspace}
\end{defn}
\begin{note}
    There is no reference to any external space or embedding in definition~\ref{def:tangentspace},
    see also figure~\ref{fig:tangentspace}!
\end{note}
$\T_p\M$ can be made into a vector space. The proof for this is so important and contains so many
important things, that one should go through it in detail.

\begin{figure}[tbh]
    \centering
    \begin{tikzpicture}[x={(170:1cm)},y={(55:.7cm)},z={(90:1cm)}]
        \draw (2.5,-2.5,0)  -- (2.5,2.5,0) node[below right] {$\T_p\M$} -- (-2.5,2.5,0) -- (-2.5,-2.5,0) -- cycle;
        \draw[looseness=.6] (2.5,-2.5,-1) node[above right] {$\M$}
        to[bend left] (2.5,2.5,-1)
        to[bend left] coordinate (mp) (-2.5,2.5,-1)
        to[bend right] (-2.5,-2.5,-1)
        to[bend right] coordinate (mm) (2.5,-2.5,-1)
        -- cycle;
        \draw[dashed,looseness=.2] (mm) to[bend left] (0,0,0) to[bend left] (mp);
        \draw[dashed,looseness=.8] (2,-0.9,0) to[bend left] (-2.8,-1,0);% to[bend left] (mp);
        \path[looseness=.2] (mm) to[bend left]
        node[pos=.2,pin={[pin distance=1cm,pin edge={solid,<-}]below right:$\gamma$}] {} (0,0,0);
        \path[looseness=.2] (2,-0.3,0) to[bend right]
        node[pos=.2,pin={[pin distance=0.5cm,pin edge={solid,<-}]below right:$\delta$}] {} (-2.8,0,0);

        \draw[->] (0,0,0) -- (0,1.5,0) node[above right] {$\dot{\gamma} = v_{\gamma, p}$};
        \node at (-0.3,-0.4,0) {$p$};
    \end{tikzpicture}
    \caption{Picture for immagining the tangent space. Keep in mind that there is no embedding needed like
    in this picture. Also in one can only think of $v_{\gamma,p}$ as an arrow in the chart, but not at
    manifold level. Also it is usefull to think of the arrow as the directional derivative $\partial_v$ in
    the direciton of this arrow. Picture adapted from~\cite{texstackexchange:tangentspace}}
    \label{fig:tangentspace}
\end{figure}
\begin{defn}[Addition and multiplication for tangent space]
    For $p\in\M$, $\gamma$ smooth curve on $\M$, $\alpha \in \mathbb{R}$:
    \begin{align}
        +:~ &\T_p\M\times \T_p\M \to \mathrm{Hom}(C^\infty(\M), \mathbb{R}) \nonumber\\
        &(v_{\gamma,p} + v_{\delta, p})(f) := v_{\gamma, p}(f) + v_{\delta, p}(f)\\
        & f \in C^\infty(M)\nonumber\\
        \cdot:~& \mathbb{R} \times \T_p\M \to \mathrm{Hom}(C^\infty(\M), \mathbb{R}) \nonumber\\
        & (\alpha \cdot v_{\gamma, p})(f) = \alpha \cdot v_{\gamma, p}(f)
    \end{align}
\end{defn}
But do they close, \textit{i.e.}, is the tangent space a vector space?
It remains to be shown that
\begin{enumerate}
    \item $\exists\, \text{curve }\sigma: v_{\gamma, p} + v_{\delta, p} = v_{\sigma, p}$
        \label{item:addofcurves}
    \item $\exists\, \text{curve }\tau: \alpha\cdot v_{\gamma,p} = v_{\tau, p}$
\end{enumerate}
The problem for~\ref{item:addofcurves} is that one cannot define $v_{\gamma,p} + v_{\delta, p}$
as just adding the points of the curves, since there is no such thing as adding two points on 
a manifold (what would be Paris + Berlin?).\\
\begin{proof} (Tangent space is a vector space)\\
    \begin{itemize}
        \item[2.]
            Construct $\tau: \mathbb{R} \to \M$:
            \begin{equation}
                \tau(\lambda) := \gamma(\alpha\cdot\lambda + \lambda_0) = (\gamma\circ\mu_\alpha)(\lambda)\,
            \end{equation}
            with $\mu_\alpha: \mathbb{R}\to\mathbb{R}, r\mapsto \alpha r + \lambda_0$.
            Then $\tau(0) = \gamma(\lambda_0) = p$.
            \begin{align}
                v_{\tau, p} &:= (f\circ\tau)'(0) = (f\circ\gamma\circ\mu_\alpha)'(0)\nonumber\\
                &= (f\circ\gamma)(\lambda_0)\alpha = \alpha v_{\gamma,p}\,.
            \end{align}
        \item [1.] Two curves $\gamma(\lambda), \delta(\lambda)$ with $\gamma(\lambda_0) = p$ and
            $\delta(\lambda_1) = p$. 
            Make a choice of chart $(U, x)$ with $p\in U$, later show independence of chart.
            Define
            \begin{align}
                \sigma_x&:\,\mathbb{R}\to\M\,,\nonumber \\
            \sigma_x(\lambda)&:= x^{-1} \left[ (x\circ\gamma)(\lambda_0 + \lambda)\right. +\\
            &+ \left.(x\circ\delta)(\lambda_1+\lambda) - (x\circ\gamma)(\lambda_0)\right]\,.\nonumber
            \end{align}
            \begin{align}
                \sigma_x(0) &= \delta(\lambda_1) = p\,,\\
                v_{\sigma_x, p}(f) &= (f\circ\sigma_x)'(0)\label{eq:vsigma}\\
                &= \left[ \underbrace{(f\circ x^{-1})}_{\mathbb{R}^d\to\mathbb{R}}\circ\underbrace{(x\circ\sigma_x)}_{\mathbb{R}^d\to\mathbb{R}} \right]'(0)\nonumber\,,
            \end{align}
            where now we use the multidimensional chain rule that a physicist would rather know as
            $\frac{\diff}{\diff \lambda}f(\vec{y}(\lambda))
            = (\vec{\nabla}_{y} f)\cdot \frac{\diff \vec{y}}{\diff\lambda}$.
            \begin{align*}
                v_{\sigma_x,p}(f) &= (x^i\circ\sigma_x)'(0)\left[\partial_i(f\circ x^{-1})\right]
                (\underbrace{x(\sigma_x(0))}_{x(p)})\\
                (x^i\circ\sigma_x)'(0) &=[(x^i\circ\gamma(\lambda_0+\lambda) + (x^i\circ\delta)(\lambda_1+\lambda)\\ 
                &~- (x^i\circ\gamma)(\lambda_0)]'\\
                &= (x^i\circ\gamma)'(\lambda_0) + (x^i\circ\delta)'(\lambda_1) = v^i_{\gamma,p} + v^i_{\delta,p}\,.
            \end{align*}
            Plugging this into equation~(\ref{eq:vsigma}) and doing the same step backwards we get
            \begin{equation}
                v_{\sigma_x, p}(f) = v_{\gamma,p}(f) + v_{\delta, p}(f)\quad\forall f\in C^\infty(\M)\,,
            \end{equation}
            independent of the chart.
    \end{itemize}
    \begin{note}
        It turns out that the sum of curves like this depends on the chart $(U, x)$, but the derivative
        of the sum of the curves at the point $p$ does not.
    \end{note}
\end{proof}
    
\subsection{Components of vectors}
Let $(U,x) \in \mathcal{A}_\text{smooth}$,
\begin{align}
    v_{\gamma,p}(f):&= (f\circ\gamma)'(0) = \left[ (f\circ x^{-1})\circ(x\circ\gamma) \right]'(0) \nonumber\\
    &= (x^i\circ\gamma)' (0) \cdot \left( \partial_i (f\circ x^{-1}) \right)\left( x(p) \right)\nonumber\\
    &=:\dot{\gamma}^i_x(0) \left(\frac{\partial f}{\partial x^i}\right)_p
    \label{eq:vectorcomponents}
\end{align}
\begin{note}
    The last step in equation~(\ref{eq:vectorcomponents}) is pure notation.
    If one sees $(\partial f / \partial x^i)_p$, one should first think of
    $\left( \partial_i (f\circ x^{-1}) \right)\left( x(p) \right)$ and also
    for $\dot{\gamma}^i_x(x)$.
    \begin{align}
        \Aboxed{%
            \left( \frac{\partial f}{\partial x^i} \right)_p &:= \left( \partial_i(f\circ x^{-1} \right)(x(p))}\\
        \Aboxed{%
        \dot{\gamma}_x^i (0) &:= (x^i\circ\gamma)'(0)}
    \end{align}
    Nevertheless one can show that what we write like a partial derivative here,
    behaves (and maybe tastes) like a partial derivative.
\end{note}
Thus we write
\begin{equation}
    v_{\gamma,p}(f) = \dot{\gamma}^i_x(0)\left( \frac{\partial}{\partial x^i} \right)_p f\,,\quad\forall f\in C^\infty\,,
\end{equation}
which leads to
\begin{equation}
    v_{\gamma,p} = \underbrace{\dot{\gamma}^i_x(0)}_{\text{components}} 
\underbrace{\left( \frac{\partial}{\partial x^i} \right)_p}_{\substack{\text{chart induced} \\\text{basis of } \T_pU}}\,.
\end{equation}
\begin{theorem}[Chart induced basis of $\T_pU$]
    Let $(U,x) \in \mathcal{A}_\text{smooth}$.
    The
    \begin{equation}
        \left( \frac{\partial}{\partial x^1} \right)_p, \ldots, \left( \frac{\partial}{\partial x^d} \right)_p \quad \in \T_p\M
    \end{equation}
    constitute a \textit{basis} of $\T_pU$.
\end{theorem}
\noindent
\begin{proof}
    Show linear independence 
    \begin{align}
        \lambda^i\left( \frac{\partial}{\partial x^i} \right)_p &\stackrel{!}{=} 0\\
        \lambda^i\left( \frac{\partial}{\partial x^i} \right)_p (x^j) &= 
        \lambda^i \overbrace{\partial_i(x^j\circ x^{-1})}^{\delta_i^j}(x(p)) \nonumber\\
        &= \lambda^j\,,\quad\forall j = 1,\ldots,d\,,
    \end{align}
\end{proof}
\begin{corollary}
    \begin{equation}
        \underbrace{\mathrm{dim}\T_p\M}_{\substack{\text{vector space}\\\text{dimension}}} = d = 
        \underbrace{\mathrm{dim}\M}_{\substack{\text{top. manif.}\\ \text{dimension}}}\,.
    \end{equation}
\end{corollary}
\subsection{Change of vector components under a change of charts}
\begin{note}
    A vector is an abstract object and does not change under a change of charts.
    How should it? It does not depend on the chart.
    If it would, we could change objects by looking at them differently (different coordinates),
    so we could do telekinesis.

    What does change are the components of a vector.
\end{note}
\begin{terminology}
    $X\in \T_p\M$ always means that 
    \begin{itemize}
        \item $\exists\,\gamma:\mathbb{R}\to\M$ s.t.\ $X = v_{\gamma,p}$.
        \item $\exists\, X^1,\ldots,X^d \in \mathbb{R}: X = X^i\left( \partial/\partial x^i \right)_p$.
    \end{itemize}
\end{terminology}
Let $(U, x)$ and $(V,y)$ be overlapping charts and $p\in U\cup V$.
Let $X \in \T_p\M$.
\begin{align}
    X &= X_{(x)}^i\left( \frac{\partial}{\partial x^i} \right)_p\nonumber\\
    &= X_{(y)}^i\left( \frac{\partial}{\partial y^i} \right)_p
    \label{eq:vectransformdef}
\end{align}
Again we have to translate the ``partial derivative''-notation:
\begin{align}
    \left( \frac{\partial}{\partial x^i} \right)_p f &= 
    \partial_i \left( f\circ x^{-1} \right)(x(p))\label{eq:changeofcomp-calc}\\
    &= \partial_i \left( \underbrace{(f\circ y^{-1})}_{\mathbb{R}^d\to\mathbb{R}}
    \circ \underbrace{(y\circ x^{-1})}_{\mathbb{R}^d\to\mathbb{R}^d}
    \right)(x(p))\nonumber\,,
\end{align}
and with the multidimensional chain rule, which a physicist would write as
\begin{equation}
    \frac{\partial}{\partial x^i}\left( f(\vec{y}(\vec{x})) \right) = 
    \left( \vec{\nabla}_y f(\vec{y}) \right)\cdot \frac{\partial \vec{y}}{\partial x^i}\,,
\end{equation}
equation~(\ref{eq:changeofcomp-calc}) becomes
\begin{align}
    \left( \frac{\partial}{\partial x^i} \right)_p f &= 
    \left( \partial_i (y\circ x^{-1} )^{j}\right)(x(p))\cdot
    \left( \partial_j(f\circ y^{-1}) \right)(y(p))\nonumber\\
            &= \left(\frac{\partial y^j}{\partial x^i}\right)_p \cdot \left(\frac{\partial}{\partial y^j}\right)_p f\,.
\end{align}
Comparison with equation~(\ref{eq:vectransformdef}) yields the transformation for vector components.
Namely the components of $X$ in the $y$-chart, $X^{j}_{(y)}$ can be calculated from the components
in the $x$-chart, $X^i_{(x)}$ through
\begin{equation}
    \boxed{%
    X^j_{(y)} = \left( \frac{\partial y^j}{\partial x^i} \right)_p X^{i}_{(x)}
}\,.
\end{equation}

\subsection{Cotangent spaces}
The cotangent space of $\T_p\M$ is
\begin{equation}
    (\T_p\M)^* := \left\{ \phi: \T_p\M \linearto \mathbb{R} \right\}\,.
\end{equation}
One often just writes $\T_p\M^*$.
\begin{exmp}[Gradient]
    For $f\in C^\infty(\M)$, define 
    \begin{align}
        (\diff f)_p: \T_p\M &\linearto \mathbb{R}\nonumber\\
        X &\mapsto (\diff f)_p(X) := Xf\,,
    \end{align}
    then $(\diff f)_p(X) \in \mathbb{R}$, thus
    $(\diff f)_p \in \T_p\M^*$ and we call $(\diff f)_p$ the \textit{gradient} of $f$ at $p\in M$. 
    Note that the gradient is a $(0,1)$-tensor, a covector, and not a $(1,0)$-tensor,
    which would be a vector.

    The components of the gradient with respect to the chart induced basis are
    (choosing a chart $(U, x)$)
    \begin{align}
        \left( (\diff f)_p \right)_j &:= (\diff f)_p\left( \frac{\partial}{\partial X^j} \right)
        = \left( \frac{\partial f}{\partial x^j} \right)_p\\
        &= \partial_j (f\circ x^{-1})(x(p))\,.
    \end{align}
\end{exmp}

\begin{theorem}[Chart induced basis for the cotantent space]
    Consider chart $(U,x)$, $x^i: U \to \mathbb{R}$.
    Then
    \begin{equation}
        \left( \diff x^1 \right), \left( \diff x^2 \right), \ldots, \left( \diff x^d \right),\,,
    \end{equation}
    is a basis of $\T_p\M^*$. In fact, if one chooses the chart induced basis in $\T_p\M$,
    it is the dual basis of the dual space $\T_p\M^*$, \textit{i.e.},
    \begin{equation}
        (\diff x^a)_p \left( \frac{\partial}{\partial x^b} \right) = \delta^a_b\,.
    \end{equation}
\end{theorem}
Again, one can calculate how the components of a covector behave under a \textit{change of chart}.
Of a covector $\omega \in \T_p\M^\star$ the components are given by
\begin{equation}
    \omega = \omega_{(x)i}(\diff x^i)_p = \omega_{(y)i}(\diff y^i)_p\,,
    \label{eq:1form}
\end{equation}
Since $\omega$ is a 1-form it always acts on a vector $v\in \T_p\M$,
\begin{equation}
    \omega(v) = \omega_{(x)i}\left( \diff x^i \right)_p(v) = \omega_{(x)i}v(x^i)\,.
\end{equation}
Take a curve $\gamma(\lambda)$ for which $v$ is the tangent vector at $p$, then
\begin{align*}
    v(x^i) &= (x^i\circ \gamma)'(0) = \left( (x^i \circ y^{-1} ) \circ ( y \circ \gamma ) \right)'(0) \\
    &= \left[ \partial_j(x^i \circ y^{-1} (y(p)) \right] \frac{\diff( y^j \circ \gamma)}{\diff \lambda}(0) \\
        &= \left( \frac{\partial x^i}{\partial y^j} \right)_p (y^j \circ \gamma)'(0)\\
        &= \left( \frac{\partial x^i}{\partial y^j} \right)_p v(y^j)\,.
\end{align*}
Plugging this in equation~(\ref{eq:1form})
\begin{align}
    w(v) &= w_{(x)i}\left( \diff x^i \right)_p = \omega_{(x)i} \left( \frac{\partial x^i}{\partial y^j} \right)_p \left( \diff y^i \right)_p\nonumber \\
    &= w_{(y)i}\left( \diff y^i \right)_p\,.
\end{align}
So the transformation for the components of a 1-form is
\begin{equation}
    \boxed{%
        \omega_{(y)i} = \left( \frac{\partial x^j}{\partial y^i} \right)_p \omega_{(x)j}
}\,.
\end{equation}

\subsection{Bundles and Vector Fields}
Up until now we were always working at a single point $p\in \M$.
The vectors and tensors we defined live in the tangent space at that point, $\T_p\M$.
\begin{defn}[Bundle]
    A \textit{bundle} is a triple
    \begin{equation}
        \mathcal{E} \xrightarrow{\phantom{asfd}\pi\phantom{asdf}} \M\,,
    \end{equation}
    where
    \begin{itemize}
        \item $\mathcal{E}$: smooth manifold (``total space''),
        \item $\pi$: surjective smooth map (``projection map''),
        \item $\M$: smooth manifold (``base space'').
    \end{itemize}
\end{defn}
\begin{defn}[Fibre]
    $\mathcal{E} \xrightarrow{\pi} \M$ a bundle, $p\in\M$, then
    \begin{equation}
        \mathrm{preim}_\pi({p})
    \end{equation}
    is called the \textit{fibre over} $p$.
\end{defn}
\begin{defn}[Section of a bundle]
    \label{def:section}
    A \textit{section} $\sigma$ of a bundle is a map $\M\to\mathcal{E}$
    with $\pi\circ\sigma = \mathrm{Id}_\M$, \textit{i.e.}\
    a section projects a point from the base space to a point in the total space
    that is in the same fibre.
\end{defn}
\begin{center}
\begin{tikzpicture}
    \matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
    {%
        \mathcal{E}\\
        \mathcal{M}\\
    };
    \path[-stealth]
        (m-1-1) edge node [right] {$\pi$} (m-2-1)
        (m-2-1) edge [bend right = 50] node [right] {$\sigma$} (m-1-1);
        %(m-1-2) edge node [above] {$f$} (m-1-3)
        %(m-1-1) edge[bend left = -60] node [above] {$f\circ\gamma$} (m-1-3);
\end{tikzpicture}
\end{center}
\begin{note}
In figure~\ref{fig:circletangentbundle} a picture for a specific bundle is given.
We choose $\M$ to be a circle and $\mathcal{E}$ to be a cylinder with the same radius.
Then $\pi$ can be any map $\mathcal{E}\to\M$ as long as it is surjective and smooth (it can also be $\mathcal{E}\supset U \to \M$).

One possibility for $\pi$ would be to just project the point down the cylinder to the circle.
Indeed, in this picture we can see every fibre (red line) as the tangent space $T_p\M$ at the point
$p$ on the circle $\M$. Then $\mathcal{E}$ consists of all $T_p\M$ and $\pi$ takes a vector $v\in \T_p\M$
and returns $p$.
\end{note}


\begin{figure}[tbh]
    \centering
    \begin{tikzpicture}
        %\draw (-2,-2.5) grid (3,3);
        \draw[ultra thick, blue] (0,0) circle [y radius=0.5cm, x radius=1cm];
    \foreach \t in {0,...,30}
    {%
        \pgfmathsetmacro{\s}{360/30*\t}
        \pgfmathsetmacro{\x}{cos(\s+10)}
        \pgfmathsetmacro{\y}{0.5*sin(\s+10)-2}
        \pgfmathsetmacro{\yy}{\y+4}
        \ifnum\t<15
            \scoped[on background layer]
            \draw[thick,red!50] (\x, \y) -- (\x,\yy);
        \else
            \ifnum\t=20
                \draw[thick, black] (\x, \y) -- (\x,\yy);
            \else
                \draw[thick,red] (\x, \y) -- (\x,\yy);
            \fi;
        \fi;
    }
        \node[blue] at (1.3,0) {$\mathcal{M}$};
        \node[red] at (1.8,1.5) {$\mathcal{E} = \T\M$};


        \pgfmathsetmacro{\s}{360/30*20}
        \pgfmathsetmacro{\x}{cos(\s+10)}
        \pgfmathsetmacro{\y}{0.5*sin(\s+10)-2}
        \pgfmathsetmacro{\yy}{\y+4}
        \draw (\x, \yy/2+\y/2) node[circle, fill, inner sep=1pt, label=below left :$p$] (p) {};
        \node at (\x, \yy+0.2) {$\T_p\mathcal{M}$};
    \end{tikzpicture}
    \caption{Picture for a bundle, where $\M$ is a circle and $\mathcal{E}$ a cylinder.
        We have chosen $\pi$ such that every point on the cylinder ($\mathcal{E}$) is projected
        down to the circle. This way every vertical line is a \textit{fibre}.
        For example the black vertical line is the fibre over the point $p$. 
        A way to think of this specific example for the tangent space of the
        circle is that the tangent at every point of the circle is rotated so
        to give this picture. 
        Picture modified from~\cite{texstackexchange:tangentbundlecircle}.}
    \label{fig:circletangentbundle}
\end{figure}
\begin{note}
    A section is a field and what kind of field it is depends on the choice of total space.
    In figure~\ref{fig:circletangentbundle} every fibre is a vector space, namely the tangent
    space to the circle at that point.
    The base space $\mathcal{M}$ and the total space $\mathcal{E}$ don't have to lie in the
    same space like in the picture, they don't need to have anything to do with each other.
\end{note}
\begin{note}
    The wave function $\psi: \mathcal{M}\to\mathbb{C}$ is actually a scalar field and not a function.
\end{note}

\begin{defn}[Tangent Bundle of a Smooth Manifold]
$(\mathcal{M},\mathcal{O},\mathcal{A})$ a smooth manifold.
\begin{enumerate}[label=(\alph*)]
    \item The tangent bundle is the \textit{disjoint union}
        of all the tangent spaces,
        \begin{equation}
            \T\M := \bigcupdot_{p\in\mathcal{M}}\T_p\M\,.
        \end{equation}
    \item The projection map $\pi$ projects down to the base point of the
        tangent space $T_p\M$ that the vector $X$ is in,
        \begin{align}
            \pi: \T\M &\to \M \,,\\
            X &\mapsto p,\quad p\in\M: X\in \T_p \M\,.
        \end{align}
    \item Construct the \textit{coarsest} topology on $\T\M$ such that $\pi$
        is (just) continuous (``the initial topology with respect to $\pi$''),
        which here is given by
        \begin{equation}
            \mathcal{O}_{\T\M} := \left\{ \preim_\pi(\mathcal{U}) \,|\, \mathcal{U} \in \mathcal{O} \right\}\,.
        \end{equation}
\end{enumerate}    
\begin{note}
    An element $X$ of the tangent bundle $X\in\T\M$ is of course an element of the tangent space
    at its point in the manifold:
    \begin{equation}
        X \in \T_{\pi(X)}\M\,.
    \end{equation}
\end{note}
The tangent bundle itself can be made to be a smooth manifold.
Construct a $C^\infty$-atlas on $\T\M$ from the $C^\infty$-atlas $\mathcal{A}$ on $\M$,
\begin{equation}
    \mathcal{A}_{\T\M} := \left\{ (\T\mathcal{U}, \xi_x) \,|\, (\mathcal{U},x)\in\mathcal{A} \right\}\,,
\end{equation}
where
\begin{align}
    \xi_x: \T\mathcal{U} &\to \mathbb{R}^{2\dim \M}\,,\\
    X &\mapsto \left( (x^1\circ\pi)(X), \ldots, (x^d\circ\pi)(X), \right. \nonumber \\
    &~ \left.(\diff x^i)_{\pi(X)}(X), \ldots, 
    (\diff x^d)_{\pi(X)} (X)\right)\,.
\end{align}
\end{defn}
\begin{note}
    $x$ is the chart that we have chosen.
    $X \in \T\M$ is a vector in $\T_p\M$ at a base point $p$.
    We can get the base point $p$ through the map $\pi$, $p = \pi(X)$.
    The first part of $\xi_x$ are the coordinates of the base point in the chart $x$, \textit{i.e.}\ $(x\circ\pi)(X)$
    and the second part are the components of the vector which we can get by acting with $(\diff x)_{\pi(X)}$ on $X$,
    since
    \begin{equation}
        X =: X^i_{(x)} \left( \frac{\partial}{\partial x^i} \right)_{\pi(X)}\,,
    \end{equation}
    and
    \begin{equation}
        \left( \diff x^j \right)_{\pi(X)} \left( \frac{\partial}{\partial_i} \right)_{\pi(X)} = \delta^j_i\,.
    \end{equation}
\end{note}
Let's write the components of $\xi_x{X}$ as
\begin{equation}
    (\underbrace{\alpha^1, \ldots, \alpha^d}_{\text{coordinates in chart }x},
    \underbrace{\beta^1,\ldots,\beta^d}_{\text{compoenents of vector in }\T_{\pi(X)}\M})
\end{equation}
The inverse of $\xi_x$
\begin{align}
    \xi_x^{-1}: \mathbb{R}^{2\dim\M} \ni \xi_x(\T\mathcal{U}) &\to \T\mathcal{U}\,,\\
    (\alpha^1,\ldots,\alpha^d,\beta^1,\ldots,\beta^d) &\mapsto \beta^i \left( \frac{\partial}{\partial x^i} \right)_{x^{-1}(\alpha^1,\ldots,\alpha^d)}\,,
    \label{eq:xiTangentBundle}
\end{align}
and of course $x^{-1}(\alpha^1,\ldots,\alpha^d)$ is just $\pi(X)$ explicitly written out.

The atlas is \textit{smooth} if the chart transition map $\xi_y\circ\xi_x^{-1}$ is smooth.
We can check that this is true by explicitly acting with $\xi_y$ on eq.~(\ref{eq:xiTangentBundle}).
Then we see that the $\alpha^i$ transform like the coordinates in a map (because they are),
\begin{equation}
    (y^j\circ x^{-1})(\alpha^1,\ldots,\alpha^d\,,
\end{equation}
and the
$\beta^i$ transform like the components of a tangent vector (because they are),
\begin{equation}
    \beta^m \left( \frac{\partial y^j}{\partial x^m} \right) = \beta^m \partial_m(y^i\circ x^{-1})(\alpha^1,\ldots,\alpha^d)\,,
\end{equation}
The chart transition map on the manifold level, $y^i\circ x^{-1}$, is smooth by assumption,
and the derivative $\partial_m (y^i \circ x^{-1})$ is also smooth, since the derivative of $C^\infty$ is still $C^\infty$.

We can summarize all of that in one picture:

\begin{center}
\begin{tikzpicture}
    \matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
    {%
        %\mathcal{E}\\
        %\mathcal{M}\\
        \T\M &  & \M\\
        C^\infty \text{ mfd.} & C^\infty \text{ map} & C^\infty \text{ mfd.} \\
    };
    \path[-stealth]
        (m-1-1) edge node [above] {$\pi$} (m-1-3);
        %(m-1-2) edge [bend right = 50] node [right] {$\sigma$} (m-1-1);
        %(m-1-2) edge node [above] {$f$} (m-1-3)
        %(m-1-1) edge[bend left = -60] node [above] {$f\circ\gamma$} (m-1-3);
\end{tikzpicture}
\end{center}

\begin{defn}[Vector Field $\chi$]
    A \textit{smooth vector field} $\chi$ is a \textit{smooth map}
    \label{def:vectorField}
    \begin{center}
    \begin{tikzpicture}
        \matrix (m) [matrix of math nodes,row sep=3em,column sep=4em,minimum width=2em]
        {%
            \T\M & \pi\circ\chi = \mathrm{id}_\M\\
            \M \\
        };
        \path[-stealth]
            (m-1-1) edge node [right] {$\pi$} (m-2-1)
            (m-2-1) edge [bend right = 50] node [right] {$\chi$} (m-1-1);
            %(m-1-2) edge node [above] {$f$} (m-1-3)
            %(m-1-1) edge[bend left = -60] node [above] {$f\circ\gamma$} (m-1-3);
    \end{tikzpicture}
    \end{center}
\end{defn}
\begin{note}
    We needed all the sommersaults with bundles and fibres for the word \textsc{smooth} in above definition.
\end{note}

\subsection[The C infinity module of smooth vector fields]{The $C^\infty(\mathcal{M})$ Module $\Gamma(\mathrm{T}\!\mathcal{M})$}
Remember: $C^\infty$ is the collection of smooth functions and also a vector space $(C^\infty(\M), +)$ (can add functions).
One can also multiply functions, but for the multiplication $fg$ there exists only an inverse $g^{-1}$ if the function
$g$ has no zeros (And in the definition of vector space only the multiplication with the function that is zero everywhere
is excluded). Thus $(C^\infty(\M), +, \cdot)$ is a \textit{ring}.

\begin{itemize}
    \item Field: Fulfills\footnote{\textbf{C}ommutative, \textbf{A}ssociative, \textbf{N}eutral element, \textbf{I}nverse element, \textbf{D}istributive
        } (C$^+$, A$^+$, N$^+$, I$^+$, C$^\cdot$, A$^\cdot$, N$^\cdot$, I$^\cdot$, D$^+$)
    \item Ring Fulfills (C$^+$, A$^+$, N$^+$, I$^+$, C$^\cdot$, A$^\cdot$, N$^\cdot$, $\bcancel{\mathrm{I}^\cdot}$, D$^+$)
\end{itemize}

\begin{equation}
    \Gamma(\T\M) := \left\{ \chi: \T\M\to\M\,|\,\text{smooth section} \right\}\,,
\end{equation}
which means all smooth vector fields on $\M$;
a section with total space $\T\M$ and base space $\M$ is a vector field, see definitions~\ref{def:vectorField}
and~\ref{def:section}.
\begin{defn}[Set of smooth vector fields $\Gamma(\T\M)$]
\begin{align}
    (\chi + \tilde{\chi})(f) := \chi(f) + \tilde{\chi}(f)\,.
\end{align}
Watch out for the $+$ and $\cdot$ and on what spaces they operate!
\end{defn}

One can make a vector field to an $\mathbb{R}$-vector space, by allowing multiplication with real numbers,
\begin{equation}
    (\alpha \cdot \chi) (f) := \alpha \cdot \chi(f)\,,
\end{equation}
but actually we can even make more! We can allow $C^\infty(\M)$ functions instead of $\mathbb{R}$,
\begin{equation}
    (g \cdot \chi) (f) := g \cdot \chi(f)\,,
\end{equation}
where $g \in C^\infty(\M)$. 
The point is, that $C^\infty(\M)$ is only a \textsc{ring} and so we don't call it a
$C^\infty(\M)$-vector space, but $C^\infty(\M)$-module\footnote{So a vector space over a ring is a module.}!

\begin{center}
\fbox{\parbox{0.42\textwidth}{%
        The set of all smooth vector fields $\Gamma(\T\M)$ can be made into a $C^\infty$-module
    }
}
\end{center}
A module does not have all the properties of vector spaces.
A module is \textit{not guaranteed} to always have a basis!
Thus we are \textit{not} in general able to write every vector field $\chi$ as
\begin{align}
    &\chi = f^i \chi_{(i)}\,,\\
    &\chi_{(1)}, \ldots, \chi_{(d)} \in \Gamma(\T\M)\,,\quad\text{global basis}
\end{align}
Example: Every vector field on the sphere has to vanish somewhere, 
but that means at this point it cannot be used as a basis.
We can do it locally, though, \textit{i.e.}\ for subsets $\mathcal{U} \in \M$.

\subsection{Tensor Fields}
Since $\T^*\M$ is also a vector space, we can define $\Gamma(\T^*\M)$ as all smooth
covector fields, which is again a $C^\infty(\M)$-module.
\begin{defn}[$(r,s)$-tensor field $T$]
    An $(r,s)$-tensor field $T$ is a $C^\infty$, in every element  multi-linear\footnote{Addition is like always,
    but s-multiplication means multiplying with a $C^\infty$ function.}, map
    \begin{align}
        T:\, & \underbrace{\Gamma(\T^*\M) \times \cdots \times \Gamma(\T^*\M)}_r \times\nonumber\\
        & \times \underbrace{\Gamma(\T\M) \times \cdots \times \Gamma(\T\M)}_s \linearto C^\infty(M)
    \end{align}
\end{defn}
\begin{note}
    So $T$ is a map from $C^\infty(\M)$ modules to the $C^\infty(\M)$ module $C^\infty(\M)$.
    Yes, $C^\infty(\M)$ itself is a $C^\infty(\M)$ module, just like $\mathbb{R}$ is an
    $\mathbb{R}$-vector space.
    I just want to write $C^\infty(\M)$ once more: $C^\infty(\M)$.
\end{note}

Example: $f \in C^\infty(\M)$
\begin{align}
    \diff f:\,\Gamma(\T\M)&\linearto C^\infty(\M)\\
    \chi &\mapsto \diff f(\chi):= \chi f\,,
\end{align}
where $\chi f$ is defined by its action on $p\in\M$,
\begin{equation}
    (\chi f)(p) := \chi(p) f\,,
\end{equation}
which works since $\chi(p)\in\T{p}\M$ can act on a function $f$.
Thus $\diff f$ is a gradient co-vector field.

\section{Connections/Covariant Derivatives}
Most of the time it is enough to think about a \textit{vector field} $X$ just as a vector in each point.
Remember: $X$ gives a \textit{directional derivative} $Xf$.
We define new notation
\begin{equation}
    \nabla_X f := Xf = (\diff f)(X)\,,\quad f\in C^\infty(M)\,,
\end{equation}
because $\nabla_X$ can be generalized to tensors.

\subsection{Directional Derivatives of Tensor Fields}
We make a wishlist for  properties of $\nabla_X$ acting on a tensor field.
There will remain a freedom in the definition of $\nabla_X$ which we need
to fix by providing additional structure.
\begin{defn}[Covariant Derivative/Affine Connection]
    A \textit{connection} $\nabla$ on a smooth manifold $(\M,\mathcal{O}, \mathcal{A})$ is a map
    that takes a pair consisting of a vector (field) $X$ and a $(p,q)$-tensor \textit{field} $T$
    and sends them to a $(p,q)$-tensor (field) $\nabla_X T$,
    satisfying
    \begin{enumerate}
        \item \textit{Extension of normal derivative}:
            \begin{equation}
                \nabla_X f = Xf\,,
            \end{equation}
            $\forall f \in C^\infty(\M)$.
        \item \textit{Additivity}: 
            \begin{equation}
                \nabla_X(T+S) = \nabla_X T + \nabla_X S\,,
            \end{equation}
            for $(p,q)$-tensors $T$, $S$,
        \item \textit{Leibnitz rule}: For a $(1,1)$ tensor field $T$, already evaluated with a covector $\omega$ and a vector $Y$,
            so $T(\omega, Y)\in C^\infty(\M)$,,
            \begin{align}
                \nonumber \nabla_X\left( T(\omega, Y) \right) &= (\nabla_X T)(\omega, Y) + T(\nabla_X \omega, Y)\\
                &~+ T(\omega, \nabla_X Y)\,.
            \end{align}
            For $(p,q)$ tensor fields analogously.
            Easier formulation (definition of the tensor product below):
            \begin{equation}
                \nabla_X(T\otimes S) = (\nabla_X T) \otimes S + T \otimes \nabla_X S\,.
            \end{equation}
        \item \textit{$C^\infty$-linearity in lower argument}:
        \begin{equation}
            \nabla_{fX+Z}T = f\nabla_X T + \nabla_Z T\,,
        \end{equation}
        $\forall f \in C^\infty(\M)$.
    \end{enumerate}
    A manifold with connection (or affine manifold) is a quadruple of structures, $(\M, \mathcal{O, A}, \nabla)$.
\end{defn}
\begin{defn}[Tensor Product $T\otimes S$]
    For a $(p,q)$-tensor $T$ and a $(l,m)$-tensor $S$, the \textit{tensor product} is defined as
    \begin{align}
        \nonumber&(T\otimes S)(\omega_1, \ldots, \omega_{p+l}, X_1,\ldots, X_{q+m}) = \\
        &T(w,\ldots, \omega_p, X_1, \ldots, X_q)\cdot\\ 
        \nonumber&~\cdot S(\omega_{p+1}, \ldots, \omega_{p+l}, X_{q+1},\ldots,X_{q+m})\,.
    \end{align}
    The first tensor eats as many covectors and vectors as it can followed by the second tensor who eats the rest.
\end{defn}
\begin{note}~
    \begin{itemize}
        \item $\nabla_X \cdot $ is the extension of $X$,
        \item $\nabla_\cdot\cdot$ is the extension of $\diff$\,.
    \end{itemize}
\end{note}
\subsection[New Structure on (M,O,A) to Define Nabla]{New Structure on $(\M, \mathcal{O}, \mathcal{A}$) Required to Define $\nabla$}
    How much freedom do we have in choosing such a structure? How fixed is $\nabla_X$ by the definition above?

    We consider vector fields $X, Y$ and choose a chart $(U, x)$, using the rules above
    \begin{align*}
        \nabla_X Y &= \nabla_{X^i\frac{\partial}{\partial x^i}} \left( Y^m \frac{\partial}{\partial x^m} \right) \\
        &= X^i\left( \nabla_{\frac{\partial}{\partial x^i}} Y^m \right)\frac{\partial}{\partial x^m} +
        X^i Y^m \nabla_{\frac{\partial}{\partial x^i}}\left( \frac{\partial}{\partial x^m} \right) \\
        &= X^i\left( \frac{\partial}{\partial x^i} Y^m \right)\frac{\partial}{\partial x^m} +
        X^i Y^m \Gamma^q_{(x)}{}_{mi} \frac{\partial}{\partial x^m}\,,
    \end{align*}
    where in the last step we have expanded $\nabla_{\frac{\partial}{\partial x^i}}\left( \frac{\partial}{\partial x^m} \right)
    = \Gamma^q_{(x)}{}_{mi} \frac{\partial}{\partial x^q}$ with the \textit{connection coefficient functions} $\Gamma^q{}_{mi}$
    (on $\M$) of $\nabla$ with respect to the chart $(U,x)$.
    The $(x)$ on $\Gamma^q_{(x)}{}_{mi}$ denotes that it depends on the chart $x$.
    \begin{defn}[Connection coefficient functions $\Gamma$]
        Given $(\M, \mathcal{O}, \mathcal{A}, \nabla)$ and a chart $(U,x)\in\mathcal{A}$ the
        \textit{connection coefficient functions} (the ``$\Gamma$s'') with respect to $(U,x)$
        are the $(\dim \M)^3$ many chart dependent functions
        \begin{align}
            \Gamma^i_{(x)}{}_{jk}: U &\to \mathbb{R} \\
            p &\mapsto \left( \diff x^i \left( \nabla_{\frac{\partial}{\partial x^k}}\frac{\partial}{\partial x^j} \right) \right)(p)\,.
        \end{align}
    \end{defn}
    Thus:
    \begin{equation}
        \left( \nabla_X Y \right)^i = X^m\left( \frac{\partial}{\partial x^m}Y^i \right) +
        \Gamma^i{}_{nm}Y^n X^m\,.
    \end{equation}
    \begin{note}
        The new structure that we need to fix $\nabla$ acting on a \textit{vector field} are the $(\dim \M)^3$ many functions 
        $\Gamma^{i}{}_{jl}$. Actually we are lucky and they already fix $\nabla$ acting on any tensor field of any rank as we
        will see.
    \end{note}
    For a dual vector field we arrive at one point at
    \begin{equation}
        \nabla_{\frac{\partial}{\partial x^m}}\left( \diff x^i \right) = \Sigma^{i}{}_{qm}\diff x^q\,,
    \end{equation}
    but now
    \begin{align*}
        &\nabla_{\frac{\partial}{\partial x^m}}\left( \diff x^i \left( \frac{\partial}{\partial x^j} \right) \right) = 0\\
        &=\left(\nabla_{\frac{\partial}{\partial x^m}}\diff x^i\right)\left(\frac{\partial}{\partial x^j}\right) +
            \diff x^i \nabla_{\frac{\partial}{\partial x^m}}\left( \frac{\partial}{\partial x^j} \right)=\\
            &= \Sigma^{i}{}_{qm}\diff x^q \left( \frac{\partial}{\partial x^j} \right) +
            \Gamma^{i}{}_{qm}\diff x^q \left( \frac{\partial}{\partial x^q} \right)\,,
    \end{align*}
    so $\Sigma = - \Gamma$ and we will just use $\Gamma$.
    \begin{center}
        \fbox{\parbox{0.42\textwidth}{%
                $\nabla$ comes with a $+$ for vectors and a $-$ for covectors.
                The last index of $\Gamma^i{}_{jm}$ goes always with the direction $X$
                of $\nabla_X$.
            }
        }
    \end{center}
    \begin{align}
        \left( \nabla_X Y \right)^i &= X(Y^i) + \Gamma^{i}{}_{jm}Y^j X^m\,,\\
        \left( \nabla_X \omega \right)_i &= X(Y^i) - \Gamma^{j}{}_{im}\omega^j X^l\,.
    \end{align}
    For higher rank tensors every upper index comes with a $+\Gamma$ and every lower index with a $-\Gamma$,
    \textit{e.g.}\ for a $(1,2)$-tensor $T$:
    \begin{align}
        \nonumber (\nabla_X T)^i_{jk} &= X(T^i_{jk}) + \Gamma^i{}_{sm}T^s_{jk}X^m \\
        &- \Gamma^s{}_{jm}T^i_{sk}X^m - \Gamma^s{}_{km}T^i_{js}X^m\,.
    \end{align}
    \begin{note}
        In Euclidean space (non-curved) $\Gamma^i{}_{lm} = 0$ for non-curvilinear coordinates.
        So in $\mathbb{R}$ for the standard basis the $\Gamma$ vanish, but not for \textit{e.g.}\ 
        polar coordinates they are nonzero.
    \end{note}
    \begin{defn}[Divergence]
        Let $X$ be a vector field on $(\M, \mathcal{O}, \mathcal{A}, \nabla)$.
        The \textit{divergence} of $X$ is the function
        \begin{equation}
            \mathrm{div}(X) := \left( \nabla_{\frac{\partial}{\partial x^i}} X \right)^i\,,
        \end{equation}
        where there is a sum over $i$.
        This definition is \textit{chart independent}.
    \end{defn}


\subsection[Change of Gammas Under Change of Chart]{Change of $\Gamma$s Under Change of Chart}
Let $(U,x),\,(V,y)\in\mathcal{A}$ and $U\cap V \neq \emptyset$, then using the transformations of $\diff x^q$ and
$\partial/\partial y^q$,
\begin{align*}
    &\Gamma^i_{(y)jk} := \diff y^i \left( \nabla_{\frac{\partial}{\partial y^l}} \frac{\partial}{\partial y^j} \right) \\
    &= \frac{\partial y^i}{\partial x^q}\diff x^q \left( \nabla_{\frac{\partial x^p}{\partial y^k}\frac{\partial}{\partial x^p}}
    \frac{\partial x^s}{\partial yj}\frac{\partial}{\partial x^s}\right)\\
    &= \frac{\partial y^i}{\partial x^q}\diff x^q \frac{\partial x^p}{\partial y^k} 
    \left\{ \left( \nabla_{\frac{\partial}{\partial x^p}} \frac{\partial x^s}{\partial y^i} \right) \frac{\partial}{\partial x^s} \right. \\
    &\hspace{4cm}+ \left.\frac{\partial x^s}{\partial y^j} \left( \nabla_{\frac{\partial}{\partial x^p}}\frac{\partial}{\partial x^s} \right)
    \right\}\\
    &= \frac{\partial y^i}{\partial x^q} \left(\frac{\partial}{\partial y^k} \frac{\partial x^s}{\partial y^j} \right) \delta^q{}_s
    + \frac{\partial y^i}{\partial x^q} \frac{\partial x^p}{\partial y^k} \frac{\partial x^s}{\partial y^j} \Gamma^q_{(x)sp}\,,
\end{align*}
and in summary the transformation of the $\Gamma$s is
\boxalign[0.47\textwidth]{%
\begin{align}
    \Gamma^i_{(y)jk} &= \frac{\partial y^i}{\partial x^q} \frac{\partial x^s}{\partial y^j} \frac{\partial x^p}{\partial y^k}\Gamma^q_{(x)sp}\\
    &~+ \frac{\partial y^i}{\partial x^q} \frac{\partial^2 x^q}{\partial y^k \partial y^j}\,.\nonumber
\end{align}
}
The first part is like the transformation of the components of a $(1,2)$-tensor.
The second part only depends on $x$ and $y$ and even if $\Gamma$ is zero in one chart, it does not have to be zero
in another, depending on this term.
If all componenets of a tensor are zero in one chart, then they are zero in all charts.
We see that for linear transformations $x(y)$ this term is zero.
\begin{note}
    \begin{equation}
        \frac{\partial}{\partial x^p}\frac{\partial}{\partial y^j} \neq \frac{\partial}{\partial y^j}\frac{\partial}{\partial x^p} \,,
    \end{equation}
    no Schwartz rule in this case, but if we write it as only derivatives with respect to $y$, then there is.
\end{note}

\subsection{Normal Coordinates}
Let $p\in \M$ of $(\M, \mathcal{O}, \mathcal{A}, \nabla)$.
Then one can construct a chart $(U,x)$ with $p\in U$ such that
\begin{equation}
    \Gamma^i_{(x)(jk)}(p) = 0\,,
    \label{eq:GammaZero}
\end{equation}
\textit{at} the point $p$, but not necessarily in a neighbourhood.
\begin{note}
    In equation~(\ref{eq:GammaZero}) $(jk)$ means the symmetrized part of $\Gamma^i{}_{(x)jk}$.
\end{note}

\textsc{Proof}: Let $(V,y)$ be any chart, $p\in V$.
Then in general $\Gamma^i_{(y)jk}\neq 0$.
Consider a new chart $(U,x)$ with the chart transition map $y \to x$:
\begin{align*}
    (x\circ y^{-1})^i&(\alpha^i, \ldots, \alpha^d) := \alpha^i - \frac{1}{2} \Gamma^i_{(y)jk}(p) \alpha^j \alpha^k\,,\\
    \frac{\partial x^i}{\partial y^k \partial y^j} &= - \Gamma^i_{(y)(kj)}(p)\,,\\
    \Gamma^i_{(x)jk} &= \Gamma^i_{(y)jk}(p) - \Gamma^i_{(y)(jk)}(p) = \Gamma^i_{(y)[jk]}\,,
\end{align*}
and thus $\Gamma_{(x)}$ has vanishing symmetric part (lower two indices).
$\Gamma^i_{[jk]}(p)$ is actually a tensor (the components transform like for a tensor) and is called the
\textit{torsion tensor},
\begin{equation}
    \Gamma^i_{[jk]} = T^{i}_{jk}\,.
\end{equation}
%------------------------------------------------


%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

\printbibliography[title={Bibliography}] % Print the bibliography, section title in curly brackets

%----------------------------------------------------------------------------------------
\end{document}
